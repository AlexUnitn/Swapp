| N. | Descrizione del test case | Test Data | Precondizioni | Dipendenze | Risultato |
| --- | --- | --- | --- | --- | --- |
| 1 | POST /api/auth/register registra un nuovo utente | Body: firstName, lastName, phoneNumber, username, email, fiscalCode, password | DB connesso | mongoose, supertest, app, generateCF | 201 e token presente |
| 2 | POST /api/auth/register errore email già registrata | Body con email duplicata e nuovi username/phone/fiscalCode | DB connesso; utente precedente creato con email base | mongoose, supertest, app, generateCF | 400 e message “Email, username, phone number or fiscal code already registered” |
| 3 | POST /api/auth/register errore phoneNumber già registrato | Body con phoneNumber duplicato e nuovi username/email/fiscalCode | DB connesso; utente precedente creato con phone base | mongoose, supertest, app, generateCF | 400 e message “Email, username, phone number or fiscal code already registered” |
| 4 | POST /api/auth/register errore fiscalCode già registrato | Body con fiscalCode duplicato e nuovi username/email/phone | DB connesso; utente precedente creato con fiscalCode base | mongoose, supertest, app, generateCF | 400 e message “Email, username, phone number or fiscal code already registered” |
| 5 | POST /api/auth/login con email e password valide | Body: email utente creato, password base | DB connesso; utente creato con password hashata | mongoose, supertest, app, bcryptjs, User, generateCF | 200 e token presente |
| 6 | POST /api/auth/login errore password errata | Body: email utente creato, password diversa | DB connesso; utente creato | mongoose, supertest, app, bcryptjs, User | 400 e message “Invalid credentials” |
| 7 | POST /api/auth/login errore senza credenziali | Body: {} | DB connesso | mongoose, supertest, app | 400 e message “Password is required” |
| 8 | POST /api/auth/login con username valido | Body: username utente creato, password base | DB connesso; utente creato | mongoose, supertest, app, bcryptjs, User | 200 e token presente |
| 9 | POST /api/auth/login con email nel campo username | Body: username=email utente, password base | DB connesso; utente creato | mongoose, supertest, app, bcryptjs, User | 200 e token presente |
| 10 | GET /api/users restituisce lista utenti senza password | Header: Authorization Bearer token | DB connesso; due utenti creati; token valido | mongoose, supertest, app, User, createToken | 200, array e oggetto senza password |
| 11 | GET /api/users/:id restituisce utente senza password | Param: id utente creato; header token | DB connesso; utente creato; token valido | mongoose, supertest, app, User, createToken | 200 con _id e senza password |
| 12 | GET /api/users/:id errore id non valido | Param: 000000000000000000000000; header token | DB connesso; utente creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “User not found” |
| 13 | PUT /api/users/:id aggiorna utente | Body: { lastName: “Updated” } | DB connesso; utente creato; token valido | mongoose, supertest, app, User, createToken | 200 e message “User updated” |
| 14 | PUT /api/users/:id errore id non valido | Param: 000000000000000000000000; body lastName | DB connesso; utente creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “User not found” |
| 15 | DELETE /api/users/:id elimina utente | Param: id utente creato; header token | DB connesso; utente creato; token valido | mongoose, supertest, app, User, createToken | 200 e message “User deleted” |
| 16 | DELETE /api/users/:id errore id non valido | Param: 000000000000000000000000; header token | DB connesso; utente creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “User not found” |
| 17 | GET /api/report restituisce lista report | Header: Authorization Bearer token | DB connesso; user creato; report creato | mongoose, supertest, app, User, Report, createToken | 200 e array |
| 18 | GET /api/report/:id restituisce report | Param: id report creato; header token | DB connesso; user e report creati | mongoose, supertest, app, User, Report, createToken | 200 e _id presente |
| 19 | GET /api/report/:id errore id non valido | Param: 000000000000000000000000; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, createToken | 404 |
| 20 | POST /api/report crea report | Body: reporter, type, description; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, Report, createToken | 200 e _id presente |
| 21 | POST /api/item crea oggetto | Body: title, description, userId, category, location; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, Item, createToken | 201 e message “Item created” |
| 22 | GET /api/item restituisce lista oggetti | Header: Authorization Bearer token | DB connesso; user e item creati | mongoose, supertest, app, User, Item, createToken | 200 e array |
| 23 | GET /api/item/:id restituisce oggetto | Param: id item creato; header token | DB connesso; user e item creati | mongoose, supertest, app, User, Item, createToken | 200 e _id presente |
| 24 | GET /api/item/:id errore id non valido | Param: 000000000000000000000000; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “Item not found” |
| 25 | GET /api/item/user/:userId restituisce oggetti per utente | Param: userId; header token | DB connesso; user e item creati | mongoose, supertest, app, User, Item, createToken | 200 e array |
| 26 | PUT /api/item/:id aggiorna oggetto | Body: { title }; header token | DB connesso; user e item creati | mongoose, supertest, app, User, Item, createToken | 200 e message “Item updated” |
| 27 | PUT /api/item/:id errore id non valido | Param: 000000000000000000000000; body title; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “Item not found” |
| 28 | DELETE /api/item/:id elimina oggetto | Param: id item creato; header token | DB connesso; user e item creati | mongoose, supertest, app, User, Item, createToken | 200 e message “Item deleted” |
| 29 | DELETE /api/item/:id errore id non valido | Param: 000000000000000000000000; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “Item not found” |
| 30 | POST /api/booking crea booking | Body: item, borrower, requestedStartDate, requestedEndDate; header token | DB connesso; owner e borrower creati; item creato | mongoose, supertest, app, User, Item, Booking, createToken | 201 e _id presente |
| 31 | GET /api/booking restituisce lista booking | Header: Authorization Bearer token | DB connesso; owner/borrower, item e booking creati | mongoose, supertest, app, User, Item, Booking, createToken | 200 e array |
| 32 | GET /api/booking/:id restituisce booking | Param: id booking creato; header token | DB connesso; owner/borrower, item e booking creati | mongoose, supertest, app, User, Item, Booking, createToken | 200 e _id presente |
| 33 | GET /api/booking/:id errore id non valido | Param: 000000000000000000000000; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “Booking not found” |
| 34 | GET /api/booking/user/:id restituisce booking per utente | Param: borrower._id; header token | DB connesso; owner/borrower, item e booking creati | mongoose, supertest, app, User, Item, Booking, createToken | 200 e array |
| 35 | GET /api/booking/user/:id errore utente non valido | Param: 000000000000000000000000; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “User not found” |
| 36 | PUT /api/booking/:id aggiorna booking | Body: { status: “accepted” }; header token | DB connesso; owner/borrower, item e booking creati | mongoose, supertest, app, User, Item, Booking, createToken | 200, _id presente e status “accepted” |
| 37 | PUT /api/booking/:id errore id non valido | Param: 000000000000000000000000; body status; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “Booking not found” |
| 38 | DELETE /api/booking/:id elimina booking | Param: id booking creato; header token | DB connesso; owner/borrower, item e booking creati | mongoose, supertest, app, User, Item, Booking, createToken | 200 e message “Booking deleted” |
| 39 | DELETE /api/booking/:id errore id non valido | Param: 000000000000000000000000; header token | DB connesso; user creato; token valido | mongoose, supertest, app, User, createToken | 404 e message “Booking not found” |
